import{t as e}from"./Grid-Be1ayg1r.js";import"./createSvgIcon-BqpB-Js_.js";import{n as t,t as n}from"./useHeroData-C02AccZS.js";import{n as r,t as i}from"./hero_details-Db6KAggc.js";import{n as a,t as o}from"./trash-2-BLH9Bvge.js";import{t as s}from"./swords-B6h62IUL.js";import{G as c,V as l,a as u,at as d,b as f,ct as p,d as m,f as h,g,h as _,i as v,n as y,o as b,p as x,rt as S,st as C,t as w,u as T}from"./index-CT2mQhyz.js";var E=u(`shield-alert`,[[`path`,{d:`M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z`,key:`oel41y`}],[`path`,{d:`M12 8v4`,key:`1got3b`}],[`path`,{d:`M12 16h.01`,key:`1drbdi`}]]),D=u(`trending-up`,[[`path`,{d:`M16 7h6v6`,key:`box55l`}],[`path`,{d:`m22 7-8.5 8.5-5-5L2 17`,key:`1t1m79`}]]),O=d(),k=p(C(),1),A=S(),j=k.memo(e=>{let t=(0,O.c)(32),{team:n,index:r,isSelected:i,hero:a,onClick:o}=e,s=l(),u=n===`enemy`?s.palette.error.main:s.palette.primary.main,d;t[0]!==r||t[1]!==o||t[2]!==n?(d=()=>o(n,r),t[0]=r,t[1]=o,t[2]=n,t[3]=d):d=t[3];let f;t[4]===u?f=t[5]:(f=c(u,.05),t[4]=u,t[5]=f);let p;t[6]!==u||t[7]!==i?(p=i?{borderColor:u,boxShadow:`0 0 15px ${c(u,.3)}`,transform:`scale(1.05)`,zIndex:1}:{"&:hover":{borderColor:c(u,.5),transform:`translateY(-2px)`}},t[6]=u,t[7]=i,t[8]=p):p=t[8];let m;t[9]!==f||t[10]!==p?(m={position:`relative`,width:`100%`,aspectRatio:`1/1`,borderRadius:4,border:`2px solid`,bgcolor:f,cursor:`pointer`,overflow:`hidden`,display:`flex`,alignItems:`center`,justifyContent:`center`,...p},t[9]=f,t[10]=p,t[11]=m):m=t[11];let g;t[12]!==u||t[13]!==a?(g=a?(0,A.jsx)(h,{component:`img`,src:a.heroSrc,alt:a.heroName,sx:{width:`100%`,height:`100%`,objectFit:`cover`}}):(0,A.jsx)(D,{size:24,style:{color:c(u,.3)}}),t[12]=u,t[13]=a,t[14]=g):g=t[14];let v;t[15]===s.palette.common.black?v=t[16]:(v=c(s.palette.common.black,.2),t[15]=s.palette.common.black,t[16]=v);let y;t[17]===Symbol.for(`react.memo_cache_sentinel`)?(y={opacity:1},t[17]=y):y=t[17];let b;t[18]===v?b=t[19]:(b={position:`absolute`,inset:0,bgcolor:v,opacity:0,transition:`opacity 0.2s`,display:`flex`,alignItems:`center`,justifyContent:`center`,"&:hover":y},t[18]=v,t[19]=b);let x;t[20]===Symbol.for(`react.memo_cache_sentinel`)?(x=(0,A.jsx)(w,{size:16,color:`white`}),t[20]=x):x=t[20];let S;t[21]===b?S=t[22]:(S=(0,A.jsx)(h,{className:`hover-overlay`,sx:b,children:x}),t[21]=b,t[22]=S);let C;t[23]!==a||t[24]!==s.palette.common.black?(C=a&&(0,A.jsx)(h,{sx:{position:`absolute`,bottom:0,left:0,right:0,bgcolor:c(s.palette.common.black,.6),backdropFilter:`blur(4px)`,py:.5,px:1,textAlign:`center`},children:(0,A.jsx)(_,{variant:`caption`,sx:{color:`common.white`,fontWeight:900,fontSize:`10px`,display:`block`,whiteSpace:`nowrap`,overflow:`hidden`,textOverflow:`ellipsis`},children:a.heroName})}),t[23]=a,t[24]=s.palette.common.black,t[25]=C):C=t[25];let T;return t[26]!==d||t[27]!==S||t[28]!==C||t[29]!==m||t[30]!==g?(T=(0,A.jsxs)(h,{onClick:d,sx:m,children:[g,S,C]}),t[26]=d,t[27]=S,t[28]=C,t[29]=m,t[30]=g,t[31]=T):T=t[31],T});const M=()=>{let{heroList:u}=n(),[d,p]=(0,k.useState)([,,,,,].fill(null)),[S,C]=(0,k.useState)([,,,,,].fill(null)),[T,O]=(0,k.useState)(null),M=(0,k.useRef)(null),[N,P]=(0,k.useState)(!1),F=k.useCallback((e,t)=>{O({team:e,index:t})},[]),I=e=>{if(!T)return;let{team:t,index:n}=T,r=t===`my`?[...d]:[...S];if(r[n]===e)return;r[n]=e,t===`my`?p(r):C(r);let i=r.findIndex((e,t)=>e===null&&t>n);if(i!==-1){O({team:t,index:i});return}let a=r.findIndex((e,t)=>e===null&&t<n);if(a!==-1){O({team:t,index:a});return}O(null)},L=e=>{if(!T)return;let{team:t}=T,n=t===`my`?[...d]:[...S],r=n.indexOf(e);r!==-1&&(n[r]=null,t===`my`?p(n):C(n),O({team:t,index:r}))},R=()=>{p([,,,,,].fill(null)),C([,,,,,].fill(null))},z=(0,k.useMemo)(()=>{let e=d.filter(e=>e!==null).map(e=>u.find(t=>t.id===e)).filter(Boolean),t=S.filter(e=>e!==null).map(e=>u.find(t=>t.id===e)).filter(Boolean),n=[],r=[],a=[],o=e=>i.filter(t=>t.name===e);return e.forEach(t=>{t&&o(t.heroName).forEach(r=>{r.relationships?.最佳搭档&&r.relationships.最佳搭档.heroes.forEach((i,a)=>{e.some(e=>e?.heroName===i.cname||i.cname.startsWith(`${e?.heroName}(`))&&(n.some(e=>e.hero===t.heroName&&e.partner===i.cname||e.hero===i.cname&&e.partner===t.heroName)||n.push({hero:t.heroName,partner:i.cname,desc:r.relationships.最佳搭档.descriptions[a]}))})})}),e.forEach(e=>{e&&o(e.heroName).forEach(n=>{n.relationships?.压制英雄&&n.relationships.压制英雄.heroes.forEach((i,a)=>{t.some(e=>e?.heroName===i.cname||i.cname.startsWith(`${e?.heroName}(`))&&r.push({hero:e.heroName,enemy:i.cname,desc:n.relationships.压制英雄.descriptions[a]})})})}),e.forEach(e=>{e&&o(e.heroName).forEach(n=>{n.relationships?.被压制英雄&&n.relationships.被压制英雄.heroes.forEach((r,i)=>{t.some(e=>e?.heroName===r.cname||r.cname.startsWith(`${e?.heroName}(`))&&(a.some(t=>t.enemy===r.cname&&t.hero===e.heroName)||a.push({enemy:r.cname,hero:e.heroName,desc:n.relationships.被压制英雄.descriptions[i]}))})})}),t.forEach(t=>{t&&o(t.heroName).forEach(n=>{n.relationships?.压制英雄&&n.relationships.压制英雄.heroes.forEach((r,i)=>{e.some(e=>e?.heroName===r.cname||r.cname.startsWith(`${e?.heroName}(`))&&(a.some(e=>e.enemy===t.heroName&&e.hero===r.cname)||a.push({enemy:t.heroName,hero:r.cname,desc:n.relationships.压制英雄.descriptions[i]}))}),n.relationships?.被压制英雄&&n.relationships.被压制英雄.heroes.forEach((i,a)=>{e.some(e=>e?.heroName===i.cname||i.cname.startsWith(`${e?.heroName}(`))&&(r.some(e=>e.hero===i.cname&&e.enemy===t.heroName)||r.push({hero:i.cname,enemy:t.heroName,desc:n.relationships.被压制英雄.descriptions[a]}))})})}),{partnerships:n,mySuppression:r,enemySuppression:a}},[d,S]);(0,k.useEffect)(()=>{let e=()=>{if(M.current){let{scrollTop:e,scrollHeight:t,clientHeight:n}=M.current,r=[...d,...S].every(e=>e!==null),i=t>n+10,a=e+n>=t-20;P(r&&i&&!a)}},t=M.current;if(t){e(),t.addEventListener(`scroll`,e);let n=new ResizeObserver(e);return n.observe(t),()=>{t.removeEventListener(`scroll`,e),n.disconnect()}}},[z,T]);let B=l();return(0,A.jsxs)(f,{elevation:0,sx:{p:{xs:3,md:4},borderRadius:10,border:`1px solid`,borderColor:c(B.palette.divider,.1),bgcolor:c(B.palette.background.paper,.6),backdropFilter:`blur(20px)`,height:`calc(100vh - 120px)`,display:`flex`,flexDirection:`column`,gap:3,position:`relative`,overflow:`hidden`,"&:hover .decorative-circle":{transform:`scale(1.1)`,opacity:.1}},children:[(0,A.jsxs)(b,{direction:`row`,alignItems:`center`,justifyContent:`space-between`,sx:{position:`relative`,zIndex:1},children:[(0,A.jsxs)(b,{direction:`row`,alignItems:`center`,spacing:1.5,children:[(0,A.jsx)(h,{sx:{width:40,height:40,borderRadius:3,bgcolor:c(B.palette.primary.main,.1),display:`flex`,alignItems:`center`,justifyContent:`center`,color:`primary.main`},children:(0,A.jsx)(s,{size:20})}),(0,A.jsxs)(h,{children:[(0,A.jsx)(_,{variant:`h6`,sx:{fontWeight:900,color:`text.primary`,tracking:`-0.02em`},children:`阵容克制关系分析`}),(0,A.jsx)(_,{variant:`caption`,sx:{color:`text.secondary`,fontWeight:500},children:`基于大数据分析英雄间的羁绊与克制`})]})]}),(0,A.jsx)(m,{variant:`outlined`,size:`small`,startIcon:(0,A.jsx)(o,{size:14}),onClick:R,sx:{borderRadius:3,borderColor:c(B.palette.divider,.2),color:`text.secondary`,fontWeight:800,px:2,"&:hover":{borderColor:`error.main`,color:`error.main`,bgcolor:c(B.palette.error.main,.05)}},children:`重置阵容`})]}),(0,A.jsxs)(e,{container:!0,spacing:4,sx:{position:`relative`,zIndex:1},children:[(0,A.jsx)(e,{size:{xs:6},children:(0,A.jsxs)(b,{spacing:2,children:[(0,A.jsxs)(b,{direction:`row`,alignItems:`center`,spacing:1,sx:{px:1},children:[(0,A.jsx)(y,{size:16,color:B.palette.primary.main}),(0,A.jsx)(_,{variant:`overline`,sx:{fontWeight:900,color:`primary.main`,letterSpacing:`0.1em`},children:`己方阵容`})]}),(0,A.jsx)(e,{container:!0,spacing:1.5,children:d.map((t,n)=>(0,A.jsx)(e,{size:{xs:2.4},children:(0,A.jsx)(j,{team:`my`,index:n,isSelected:T?.team===`my`&&T?.index===n,hero:t?u.find(e=>e.id===t):null,onClick:F})},`my-${n}`))})]})}),(0,A.jsx)(e,{size:{xs:6},children:(0,A.jsxs)(b,{spacing:2,children:[(0,A.jsxs)(b,{direction:`row`,alignItems:`center`,spacing:1,sx:{px:1,justifyContent:`flex-end`},children:[(0,A.jsx)(_,{variant:`overline`,sx:{fontWeight:900,color:`error.main`,letterSpacing:`0.1em`},children:`敌方阵容`}),(0,A.jsx)(w,{size:16,color:B.palette.error.main})]}),(0,A.jsx)(e,{container:!0,spacing:1.5,children:S.map((t,n)=>(0,A.jsx)(e,{size:{xs:2.4},children:(0,A.jsx)(j,{team:`enemy`,index:n,isSelected:T?.team===`enemy`&&T?.index===n,hero:t?u.find(e=>e.id===t):null,onClick:F})},`enemy-${n}`))})]})})]}),T&&(0,A.jsx)(h,{sx:{bgcolor:c(B.palette.background.paper,.4),borderRadius:6,border:`2px dashed`,borderColor:c(T?.team===`my`?B.palette.primary.main:B.palette.error.main,.2),p:{xs:2,md:3},display:`flex`,flexDirection:`column`,height:400,position:`relative`,mb:1,zIndex:10,flexShrink:0},children:(0,A.jsxs)(h,{sx:{display:`flex`,flexDirection:`column`,height:`100%`},children:[(0,A.jsxs)(b,{direction:`row`,alignItems:`center`,justifyContent:`space-between`,sx:{mb:2},children:[(0,A.jsxs)(b,{direction:`row`,alignItems:`center`,spacing:2,children:[(0,A.jsx)(h,{sx:{width:6,height:24,borderRadius:1,bgcolor:T.team===`my`?`primary.main`:`error.main`}}),(0,A.jsxs)(_,{variant:`h6`,sx:{fontWeight:900},children:[`选择`,T.team===`my`?`己方`:`敌方`,`第 `,T.index+1,` 位英雄`]})]}),(0,A.jsx)(g,{onClick:()=>O(null),sx:{bgcolor:c(B.palette.action.hover,.05),"&:hover":{bgcolor:c(B.palette.primary.main,.1),color:`primary.main`}},children:(0,A.jsx)(t,{size:20})})]}),(0,A.jsx)(h,{sx:{flex:1,overflow:`hidden`},children:(0,A.jsx)(r,{value:T.team===`my`?d[T.index]||0:S[T.index]||0,onChange:I,isStatic:!0,selectedIds:T.team===`my`?d.filter((e,t)=>e!==null&&t!==T.index):S.filter((e,t)=>e!==null&&t!==T.index),onRemove:L,maxSelect:5})}),(0,A.jsx)(_,{variant:`caption`,sx:{mt:1.5,textAlign:`center`,color:`text.secondary`,fontStyle:`italic`,fontWeight:500},children:`提示：在上方搜索框输入英雄名或直接从列表中选择英雄`})]})}),(0,A.jsxs)(h,{sx:{position:`relative`,flex:1,display:`flex`,flexDirection:`column`,minHeight:0},children:[(0,A.jsx)(h,{ref:M,sx:{flex:1,overflowY:`auto`,pr:1,mr:-1,mt:1,position:`relative`,zIndex:1,"&::-webkit-scrollbar":{width:`6px`},"&::-webkit-scrollbar-thumb":{bgcolor:c(B.palette.divider,.1),borderRadius:`10px`},"&::-webkit-scrollbar-thumb:hover":{bgcolor:c(B.palette.primary.main,.2)}},children:z.partnerships.length===0&&z.mySuppression.length===0&&z.enemySuppression.length===0&&!T?(0,A.jsxs)(b,{alignItems:`center`,justifyContent:`center`,sx:{height:`100%`,py:8,color:`text.secondary`,opacity:.5},children:[(0,A.jsx)(a,{size:48}),(0,A.jsx)(_,{variant:`body2`,sx:{mt:2,fontWeight:800},children:`选择英雄开始分析克制关系`})]}):(0,A.jsxs)(b,{spacing:3,children:[z.partnerships.length>0&&(0,A.jsxs)(b,{spacing:1.5,children:[(0,A.jsxs)(b,{direction:`row`,alignItems:`center`,spacing:1,sx:{px:1},children:[(0,A.jsx)(D,{size:14,color:B.palette.success.main}),(0,A.jsx)(_,{variant:`overline`,sx:{fontWeight:900,color:`success.main`,letterSpacing:`0.2em`},children:`最佳搭档`})]}),z.partnerships.map((e,t)=>(0,A.jsxs)(f,{elevation:0,sx:{p:2,borderRadius:4,bgcolor:c(B.palette.success.main,.05),border:`1px solid`,borderColor:c(B.palette.success.main,.1),animation:`fadeInUp 0.3s ease-out`},children:[(0,A.jsxs)(_,{variant:`subtitle2`,sx:{fontWeight:900,color:`success.main`,mb:.5},children:[e.hero,` & `,e.partner]}),(0,A.jsx)(_,{variant:`body2`,sx:{color:`text.secondary`,lineHeight:1.6,fontWeight:500},children:e.desc})]},t))]}),z.mySuppression.length>0&&(0,A.jsxs)(b,{spacing:1.5,children:[(0,A.jsxs)(b,{direction:`row`,alignItems:`center`,spacing:1,sx:{px:1},children:[(0,A.jsx)(w,{size:14,color:B.palette.primary.main}),(0,A.jsx)(_,{variant:`overline`,sx:{fontWeight:900,color:`primary.main`,letterSpacing:`0.2em`},children:`我方压制`})]}),z.mySuppression.map((e,t)=>(0,A.jsxs)(f,{elevation:0,sx:{p:2,borderRadius:4,bgcolor:c(B.palette.primary.main,.05),border:`1px solid`,borderColor:c(B.palette.primary.main,.1),animation:`fadeInUp 0.3s ease-out`},children:[(0,A.jsxs)(_,{variant:`subtitle2`,sx:{fontWeight:900,color:`primary.main`,mb:.5},children:[e.hero,` `,(0,A.jsx)(h,{component:`span`,sx:{mx:1,color:`text.secondary`,fontWeight:500},children:`压制`}),` `,e.enemy]}),(0,A.jsx)(_,{variant:`body2`,sx:{color:`text.secondary`,lineHeight:1.6,fontWeight:500},children:e.desc})]},t))]}),z.enemySuppression.length>0&&(0,A.jsxs)(b,{spacing:1.5,children:[(0,A.jsxs)(b,{direction:`row`,alignItems:`center`,spacing:1,sx:{px:1},children:[(0,A.jsx)(E,{size:14,color:B.palette.error.main}),(0,A.jsx)(_,{variant:`overline`,sx:{fontWeight:900,color:`error.main`,letterSpacing:`0.2em`},children:`敌方压制`})]}),z.enemySuppression.map((e,t)=>(0,A.jsxs)(f,{elevation:0,sx:{p:2,borderRadius:4,bgcolor:c(B.palette.error.main,.05),border:`1px solid`,borderColor:c(B.palette.error.main,.1),animation:`fadeInUp 0.3s ease-out`},children:[(0,A.jsxs)(_,{variant:`subtitle2`,sx:{fontWeight:900,color:`error.main`,mb:.5},children:[e.enemy,` `,(0,A.jsx)(h,{component:`span`,sx:{mx:1,color:`text.secondary`,fontWeight:500},children:`压制`}),` `,e.hero]}),(0,A.jsx)(_,{variant:`body2`,sx:{color:`text.secondary`,lineHeight:1.6,fontWeight:500},children:e.desc})]},t))]})]})}),(0,A.jsx)(x,{in:N,children:(0,A.jsx)(h,{sx:{position:`absolute`,bottom:0,left:0,right:0,height:60,background:`linear-gradient(transparent, ${c(B.palette.background.paper,.8)})`,pointerEvents:`none`,zIndex:2,display:`flex`,alignItems:`flex-end`,justifyContent:`center`,pb:1},children:(0,A.jsxs)(b,{direction:`row`,alignItems:`center`,spacing:.5,sx:{color:`primary.main`,animation:`bounce 2s infinite`},children:[(0,A.jsx)(_,{variant:`caption`,sx:{fontWeight:900,letterSpacing:`0.1em`},children:`更多分析内容，请滚动查看`}),(0,A.jsx)(v,{size:14,strokeWidth:3})]})})})]}),(0,A.jsx)(h,{className:`decorative-circle`,sx:{position:`absolute`,bottom:-48,right:-48,width:192,height:192,bgcolor:c(B.palette.primary.main,.05),borderRadius:`50%`,filter:`blur(40px)`,transition:`all 0.5s ease-out`,pointerEvents:`none`}})]})};var N=d();function P(){let e=(0,N.c)(3),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t={height:`100%`,overflowY:`hidden`,display:`flex`,flexDirection:`column`},e[0]=t):t=e[0];let n;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n={flex:1,py:{md:4,sm:2},zIndex:10},e[1]=n):n=e[1];let r;return e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,A.jsx)(h,{sx:t,children:(0,A.jsx)(T,{maxWidth:`lg`,sx:n,children:(0,A.jsx)(h,{children:(0,A.jsx)(M,{})})})}),e[2]=r):r=e[2],r}export{P as default};