import{t as e}from"./Grid-D3xpJAz3.js";import"./createSvgIcon-2Xtgqv9X.js";import{t}from"./useHeroData-DP3V8Ka0.js";import{n,t as r}from"./hero_details-DIRVBYEz.js";import{n as i,t as a}from"./trash-2-CYsLXgiw.js";import{t as o}from"./swords-D5y_xXpV.js";import{G as s,S as c,X as l,_ as u,a as d,ct as f,f as p,ft as m,h,m as g,n as _,o as v,p as y,pt as b,r as x,s as S,t as C,ut as w,v as T}from"./index-CLlfRqwZ.js";var E=v(`shield-alert`,[[`path`,{d:`M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z`,key:`oel41y`}],[`path`,{d:`M12 8v4`,key:`1got3b`}],[`path`,{d:`M12 16h.01`,key:`1drbdi`}]]),D=v(`trending-up`,[[`path`,{d:`M16 7h6v6`,key:`box55l`}],[`path`,{d:`m22 7-8.5 8.5-5-5L2 17`,key:`1t1m79`}]]),O=w(),k=b(m(),1),A=f(),j=k.memo(e=>{let t=(0,O.c)(32),{team:n,index:r,isSelected:i,hero:a,onClick:o}=e,c=s(),d=n===`enemy`?c.palette.error.main:c.palette.primary.main,f;t[0]!==r||t[1]!==o||t[2]!==n?(f=()=>o(n,r),t[0]=r,t[1]=o,t[2]=n,t[3]=f):f=t[3];let p;t[4]===d?p=t[5]:(p=l(d,.05),t[4]=d,t[5]=p);let m;t[6]!==d||t[7]!==i?(m=i?{borderColor:d,boxShadow:`0 0 15px ${l(d,.3)}`,transform:`scale(1.05)`,zIndex:1}:{"&:hover":{borderColor:l(d,.5),transform:`translateY(-2px)`}},t[6]=d,t[7]=i,t[8]=m):m=t[8];let h;t[9]!==p||t[10]!==m?(h={position:`relative`,width:`100%`,aspectRatio:`1/1`,borderRadius:4,border:`2px solid`,bgcolor:p,cursor:`pointer`,overflow:`hidden`,display:`flex`,alignItems:`center`,justifyContent:`center`,...m},t[9]=p,t[10]=m,t[11]=h):h=t[11];let _;t[12]!==d||t[13]!==a?(_=a?(0,A.jsx)(g,{component:`img`,src:a.heroSrc,alt:a.heroName,sx:{width:`100%`,height:`100%`,objectFit:`cover`}}):(0,A.jsx)(D,{size:24,style:{color:l(d,.3)}}),t[12]=d,t[13]=a,t[14]=_):_=t[14];let v;t[15]===c.palette.common.black?v=t[16]:(v=l(c.palette.common.black,.2),t[15]=c.palette.common.black,t[16]=v);let y;t[17]===Symbol.for(`react.memo_cache_sentinel`)?(y={opacity:1},t[17]=y):y=t[17];let b;t[18]===v?b=t[19]:(b={position:`absolute`,inset:0,bgcolor:v,opacity:0,transition:`opacity 0.2s`,display:`flex`,alignItems:`center`,justifyContent:`center`,"&:hover":y},t[18]=v,t[19]=b);let x;t[20]===Symbol.for(`react.memo_cache_sentinel`)?(x=(0,A.jsx)(C,{size:16,color:`white`}),t[20]=x):x=t[20];let S;t[21]===b?S=t[22]:(S=(0,A.jsx)(g,{className:`hover-overlay`,sx:b,children:x}),t[21]=b,t[22]=S);let w;t[23]!==a||t[24]!==c.palette.common.black?(w=a&&(0,A.jsx)(g,{sx:{position:`absolute`,bottom:0,left:0,right:0,bgcolor:l(c.palette.common.black,.6),backdropFilter:`blur(4px)`,py:.5,px:1,textAlign:`center`},children:(0,A.jsx)(u,{variant:`caption`,sx:{color:`common.white`,fontWeight:900,fontSize:`10px`,display:`block`,whiteSpace:`nowrap`,overflow:`hidden`,textOverflow:`ellipsis`},children:a.heroName})}),t[23]=a,t[24]=c.palette.common.black,t[25]=w):w=t[25];let T;return t[26]!==f||t[27]!==S||t[28]!==w||t[29]!==h||t[30]!==_?(T=(0,A.jsxs)(g,{onClick:f,sx:h,children:[_,S,w]}),t[26]=f,t[27]=S,t[28]=w,t[29]=h,t[30]=_,t[31]=T):T=t[31],T});const M=()=>{let{heroList:f}=t(),[p,m]=(0,k.useState)([,,,,,].fill(null)),[v,b]=(0,k.useState)([,,,,,].fill(null)),[w,O]=(0,k.useState)(null),M=(0,k.useRef)(null),[N,P]=(0,k.useState)(!1),F=k.useCallback((e,t)=>{O({team:e,index:t})},[]),I=e=>{if(!w)return;let{team:t,index:n}=w,r=t===`my`?[...p]:[...v];if(r[n]===e)return;r[n]=e,t===`my`?m(r):b(r);let i=r.findIndex((e,t)=>e===null&&t>n);if(i!==-1){O({team:t,index:i});return}let a=r.findIndex((e,t)=>e===null&&t<n);if(a!==-1){O({team:t,index:a});return}O(null)},L=e=>{if(!w)return;let{team:t}=w,n=t===`my`?[...p]:[...v],r=n.indexOf(e);r!==-1&&(n[r]=null,t===`my`?m(n):b(n),O({team:t,index:r}))},R=()=>{m([,,,,,].fill(null)),b([,,,,,].fill(null))},z=(0,k.useMemo)(()=>{let e=p.filter(e=>e!==null).map(e=>f.find(t=>t.id===e)).filter(Boolean),t=v.filter(e=>e!==null).map(e=>f.find(t=>t.id===e)).filter(Boolean),n=[],i=[],a=[],o=e=>r.filter(t=>t.name===e);return e.forEach(t=>{t&&o(t.heroName).forEach(r=>{r.relationships?.最佳搭档&&r.relationships.最佳搭档.heroes.forEach((i,a)=>{e.some(e=>e?.heroName===i.cname||i.cname.startsWith(`${e?.heroName}(`))&&(n.some(e=>e.hero===t.heroName&&e.partner===i.cname||e.hero===i.cname&&e.partner===t.heroName)||n.push({hero:t.heroName,partner:i.cname,desc:r.relationships.最佳搭档.descriptions[a]}))})})}),e.forEach(e=>{e&&o(e.heroName).forEach(n=>{n.relationships?.压制英雄&&n.relationships.压制英雄.heroes.forEach((r,a)=>{t.some(e=>e?.heroName===r.cname||r.cname.startsWith(`${e?.heroName}(`))&&i.push({hero:e.heroName,enemy:r.cname,desc:n.relationships.压制英雄.descriptions[a]})})})}),e.forEach(e=>{e&&o(e.heroName).forEach(n=>{n.relationships?.被压制英雄&&n.relationships.被压制英雄.heroes.forEach((r,i)=>{t.some(e=>e?.heroName===r.cname||r.cname.startsWith(`${e?.heroName}(`))&&(a.some(t=>t.enemy===r.cname&&t.hero===e.heroName)||a.push({enemy:r.cname,hero:e.heroName,desc:n.relationships.被压制英雄.descriptions[i]}))})})}),t.forEach(t=>{t&&o(t.heroName).forEach(n=>{n.relationships?.压制英雄&&n.relationships.压制英雄.heroes.forEach((r,i)=>{e.some(e=>e?.heroName===r.cname||r.cname.startsWith(`${e?.heroName}(`))&&(a.some(e=>e.enemy===t.heroName&&e.hero===r.cname)||a.push({enemy:t.heroName,hero:r.cname,desc:n.relationships.压制英雄.descriptions[i]}))}),n.relationships?.被压制英雄&&n.relationships.被压制英雄.heroes.forEach((r,a)=>{e.some(e=>e?.heroName===r.cname||r.cname.startsWith(`${e?.heroName}(`))&&(i.some(e=>e.hero===r.cname&&e.enemy===t.heroName)||i.push({hero:r.cname,enemy:t.heroName,desc:n.relationships.被压制英雄.descriptions[a]}))})})}),{partnerships:n,mySuppression:i,enemySuppression:a}},[p,v]);(0,k.useEffect)(()=>{let e=()=>{if(M.current){let{scrollTop:e,scrollHeight:t,clientHeight:n}=M.current,r=[...p,...v].every(e=>e!==null),i=t>n+10,a=e+n>=t-20;P(r&&i&&!a)}},t=M.current;if(t){e(),t.addEventListener(`scroll`,e);let n=new ResizeObserver(e);return n.observe(t),()=>{t.removeEventListener(`scroll`,e),n.disconnect()}}},[z,w]);let B=s();return(0,A.jsxs)(c,{elevation:0,sx:{p:{xs:2,md:4},borderRadius:{xs:6,md:10},border:`1px solid`,borderColor:l(B.palette.divider,.1),bgcolor:l(B.palette.background.paper,.6),backdropFilter:`blur(20px)`,height:{xs:`calc(100dvh - 80px)`,md:`calc(100vh - 120px)`},display:`flex`,flexDirection:`column`,gap:{xs:2,md:3},position:`relative`,overflow:`hidden`,"&:hover .decorative-circle":{transform:`scale(1.1)`,opacity:.1}},children:[(0,A.jsxs)(S,{direction:`row`,alignItems:`center`,justifyContent:`space-between`,sx:{position:`relative`,zIndex:1,gap:1},children:[(0,A.jsxs)(S,{direction:`row`,alignItems:`center`,spacing:1.5,children:[(0,A.jsx)(g,{sx:{width:{xs:32,md:40},height:{xs:32,md:40},borderRadius:{xs:2,md:3},bgcolor:l(B.palette.primary.main,.1),display:`flex`,alignItems:`center`,justifyContent:`center`,color:`primary.main`,flexShrink:0},children:(0,A.jsx)(o,{size:18})}),(0,A.jsxs)(g,{children:[(0,A.jsx)(u,{variant:`h6`,sx:{fontWeight:900,color:`text.primary`,tracking:`-0.02em`,fontSize:{xs:`14px`,md:`1.25rem`}},children:`阵容克制分析`}),(0,A.jsx)(u,{variant:`caption`,sx:{color:`text.secondary`,fontWeight:500,fontSize:{xs:`10px`,md:`0.75rem`},display:{xs:`none`,sm:`block`}},children:`基于大数据分析英雄间的羁绊与克制`})]})]}),(0,A.jsx)(y,{variant:`outlined`,size:`small`,startIcon:(0,A.jsx)(a,{size:14}),onClick:R,sx:{borderRadius:3,borderColor:l(B.palette.divider,.2),color:`text.secondary`,fontWeight:800,px:{xs:1.5,md:2},fontSize:{xs:`11px`,md:`0.8125rem`},"&:hover":{borderColor:`error.main`,color:`error.main`,bgcolor:l(B.palette.error.main,.05)}},children:`重置`})]}),(0,A.jsxs)(e,{container:!0,spacing:{xs:2,md:4},sx:{position:`relative`,zIndex:1},children:[(0,A.jsx)(e,{size:{xs:12,sm:6},children:(0,A.jsxs)(S,{spacing:1.5,children:[(0,A.jsxs)(S,{direction:`row`,alignItems:`center`,spacing:1,sx:{px:1},children:[(0,A.jsx)(x,{size:14,color:B.palette.primary.main}),(0,A.jsx)(u,{variant:`overline`,sx:{fontWeight:900,color:`primary.main`,letterSpacing:`0.1em`,fontSize:{xs:`10px`,md:`0.75rem`}},children:`己方阵容`})]}),(0,A.jsx)(e,{container:!0,spacing:1,children:p.map((t,n)=>(0,A.jsx)(e,{size:{xs:2.4},children:(0,A.jsx)(j,{team:`my`,index:n,isSelected:w?.team===`my`&&w?.index===n,hero:t?f.find(e=>e.id===t):null,onClick:F})},`my-${n}`))})]})}),(0,A.jsx)(e,{size:{xs:12,sm:6},children:(0,A.jsxs)(S,{spacing:1.5,children:[(0,A.jsxs)(S,{direction:`row`,alignItems:`center`,spacing:1,sx:{px:1,justifyContent:{xs:`flex-start`,sm:`flex-end`}},children:[(0,A.jsx)(u,{variant:`overline`,sx:{fontWeight:900,color:`error.main`,letterSpacing:`0.1em`,fontSize:{xs:`10px`,md:`0.75rem`}},children:`敌方阵容`}),(0,A.jsx)(C,{size:14,color:B.palette.error.main})]}),(0,A.jsx)(e,{container:!0,spacing:1,children:v.map((t,n)=>(0,A.jsx)(e,{size:{xs:2.4},children:(0,A.jsx)(j,{team:`enemy`,index:n,isSelected:w?.team===`enemy`&&w?.index===n,hero:t?f.find(e=>e.id===t):null,onClick:F})},`enemy-${n}`))})]})})]}),w&&(0,A.jsx)(g,{sx:{bgcolor:l(B.palette.background.paper,.4),borderRadius:{xs:4,md:6},border:`2px dashed`,borderColor:l(w?.team===`my`?B.palette.primary.main:B.palette.error.main,.2),p:{xs:1.5,md:3},display:`flex`,flexDirection:`column`,height:{xs:320,md:400},position:`relative`,mb:1,zIndex:10,flexShrink:0},children:(0,A.jsxs)(g,{sx:{display:`flex`,flexDirection:`column`,height:`100%`},children:[(0,A.jsxs)(S,{direction:`row`,alignItems:`center`,justifyContent:`space-between`,sx:{mb:{xs:1,md:2}},children:[(0,A.jsxs)(S,{direction:`row`,alignItems:`center`,spacing:1.5,children:[(0,A.jsx)(g,{sx:{width:4,height:16,borderRadius:1,bgcolor:w.team===`my`?`primary.main`:`error.main`}}),(0,A.jsxs)(u,{variant:`subtitle1`,sx:{fontWeight:900,fontSize:{xs:`13px`,md:`1rem`}},children:[`选择`,w.team===`my`?`己方`:`敌方`,`第 `,w.index+1,` 位英雄`]})]}),(0,A.jsx)(T,{size:`small`,onClick:()=>O(null),sx:{bgcolor:l(B.palette.action.hover,.05),"&:hover":{bgcolor:l(B.palette.primary.main,.1),color:`primary.main`}},children:(0,A.jsx)(_,{size:18})})]}),(0,A.jsx)(g,{sx:{flex:1,overflow:`hidden`},children:(0,A.jsx)(n,{value:w.team===`my`?p[w.index]||0:v[w.index]||0,onChange:I,isStatic:!0,selectedIds:w.team===`my`?p.filter((e,t)=>e!==null&&t!==w.index):v.filter((e,t)=>e!==null&&t!==w.index),onRemove:L,maxSelect:5})})]})}),(0,A.jsxs)(g,{sx:{position:`relative`,flex:1,display:`flex`,flexDirection:`column`,minHeight:0},children:[(0,A.jsx)(g,{ref:M,sx:{flex:1,overflowY:`auto`,pr:1,mr:-1,mt:1,position:`relative`,zIndex:1,"&::-webkit-scrollbar":{width:`6px`},"&::-webkit-scrollbar-thumb":{bgcolor:l(B.palette.divider,.1),borderRadius:`10px`},"&::-webkit-scrollbar-thumb:hover":{bgcolor:l(B.palette.primary.main,.2)}},children:z.partnerships.length===0&&z.mySuppression.length===0&&z.enemySuppression.length===0&&!w?(0,A.jsxs)(S,{alignItems:`center`,justifyContent:`center`,sx:{height:`100%`,py:8,color:`text.secondary`,opacity:.5},children:[(0,A.jsx)(i,{size:48}),(0,A.jsx)(u,{variant:`body2`,sx:{mt:2,fontWeight:800},children:`选择英雄开始分析克制关系`})]}):(0,A.jsxs)(S,{spacing:3,children:[z.partnerships.length>0&&(0,A.jsxs)(S,{spacing:1.5,children:[(0,A.jsxs)(S,{direction:`row`,alignItems:`center`,spacing:1,sx:{px:1},children:[(0,A.jsx)(D,{size:14,color:B.palette.success.main}),(0,A.jsx)(u,{variant:`overline`,sx:{fontWeight:900,color:`success.main`,letterSpacing:`0.2em`},children:`最佳搭档`})]}),z.partnerships.map((e,t)=>(0,A.jsxs)(c,{elevation:0,sx:{p:{xs:1.5,md:2},borderRadius:{xs:3,md:4},bgcolor:l(B.palette.success.main,.05),border:`1px solid`,borderColor:l(B.palette.success.main,.1),animation:`fadeInUp 0.3s ease-out`},children:[(0,A.jsxs)(u,{variant:`subtitle2`,sx:{fontWeight:900,color:`success.main`,mb:.5,fontSize:{xs:`13px`,md:`0.875rem`}},children:[e.hero,` & `,e.partner]}),(0,A.jsx)(u,{variant:`body2`,sx:{color:`text.secondary`,lineHeight:1.6,fontWeight:500,fontSize:{xs:`12px`,md:`0.875rem`}},children:e.desc})]},t))]}),z.mySuppression.length>0&&(0,A.jsxs)(S,{spacing:1.5,children:[(0,A.jsxs)(S,{direction:`row`,alignItems:`center`,spacing:1,sx:{px:1},children:[(0,A.jsx)(C,{size:14,color:B.palette.primary.main}),(0,A.jsx)(u,{variant:`overline`,sx:{fontWeight:900,color:`primary.main`,letterSpacing:`0.2em`},children:`我方压制`})]}),z.mySuppression.map((e,t)=>(0,A.jsxs)(c,{elevation:0,sx:{p:2,borderRadius:4,bgcolor:l(B.palette.primary.main,.05),border:`1px solid`,borderColor:l(B.palette.primary.main,.1),animation:`fadeInUp 0.3s ease-out`},children:[(0,A.jsxs)(u,{variant:`subtitle2`,sx:{fontWeight:900,color:`primary.main`,mb:.5},children:[e.hero,` `,(0,A.jsx)(g,{component:`span`,sx:{mx:1,color:`text.secondary`,fontWeight:500},children:`压制`}),` `,e.enemy]}),(0,A.jsx)(u,{variant:`body2`,sx:{color:`text.secondary`,lineHeight:1.6,fontWeight:500},children:e.desc})]},t))]}),z.enemySuppression.length>0&&(0,A.jsxs)(S,{spacing:1.5,children:[(0,A.jsxs)(S,{direction:`row`,alignItems:`center`,spacing:1,sx:{px:1},children:[(0,A.jsx)(E,{size:14,color:B.palette.error.main}),(0,A.jsx)(u,{variant:`overline`,sx:{fontWeight:900,color:`error.main`,letterSpacing:`0.2em`},children:`敌方压制`})]}),z.enemySuppression.map((e,t)=>(0,A.jsxs)(c,{elevation:0,sx:{p:2,borderRadius:4,bgcolor:l(B.palette.error.main,.05),border:`1px solid`,borderColor:l(B.palette.error.main,.1),animation:`fadeInUp 0.3s ease-out`},children:[(0,A.jsxs)(u,{variant:`subtitle2`,sx:{fontWeight:900,color:`error.main`,mb:.5},children:[e.enemy,` `,(0,A.jsx)(g,{component:`span`,sx:{mx:1,color:`text.secondary`,fontWeight:500},children:`压制`}),` `,e.hero]}),(0,A.jsx)(u,{variant:`body2`,sx:{color:`text.secondary`,lineHeight:1.6,fontWeight:500},children:e.desc})]},t))]})]})}),(0,A.jsx)(h,{in:N,children:(0,A.jsx)(g,{sx:{position:`absolute`,bottom:0,left:0,right:0,height:60,background:`linear-gradient(transparent, ${l(B.palette.background.paper,.8)})`,pointerEvents:`none`,zIndex:2,display:`flex`,alignItems:`flex-end`,justifyContent:`center`,pb:1},children:(0,A.jsxs)(S,{direction:`row`,alignItems:`center`,spacing:.5,sx:{color:`primary.main`,animation:`bounce 2s infinite`},children:[(0,A.jsx)(u,{variant:`caption`,sx:{fontWeight:900,letterSpacing:`0.1em`},children:`更多分析内容，请滚动查看`}),(0,A.jsx)(d,{size:14,strokeWidth:3})]})})})]}),(0,A.jsx)(g,{className:`decorative-circle`,sx:{position:`absolute`,bottom:-48,right:-48,width:192,height:192,bgcolor:l(B.palette.primary.main,.05),borderRadius:`50%`,filter:`blur(40px)`,transition:`all 0.5s ease-out`,pointerEvents:`none`}})]})};var N=w();function P(){let e=(0,N.c)(3),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t={height:`100%`,overflowY:`hidden`,display:`flex`,flexDirection:`column`},e[0]=t):t=e[0];let n;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n={flex:1,py:{xs:2,md:4},zIndex:10},e[1]=n):n=e[1];let r;return e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,A.jsx)(g,{sx:t,children:(0,A.jsx)(p,{maxWidth:`lg`,sx:n,children:(0,A.jsx)(g,{sx:{height:`100%`},children:(0,A.jsx)(M,{})})})}),e[2]=r):r=e[2],r}export{P as default};