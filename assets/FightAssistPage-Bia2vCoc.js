import{t as e}from"./Grid-CTdwlCmc.js";import"./createSvgIcon-K8kibvSA.js";import{n as t,t as n}from"./useHeroData-C5johPSh.js";import{n as r,t as i}from"./hero_details-DkcltfSv.js";import{n as a,t as o}from"./trash-2-Cz0zLbM2.js";import{t as s}from"./swords-BRvH1Zg7.js";import{B as c,W as l,a as u,d,f,h as p,it as m,m as h,n as g,nt as _,o as v,ot as y,st as b,t as x,u as S,y as C}from"./index-fpE1lfO2.js";var w=u(`shield-alert`,[[`path`,{d:`M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z`,key:`oel41y`}],[`path`,{d:`M12 8v4`,key:`1got3b`}],[`path`,{d:`M12 16h.01`,key:`1drbdi`}]]),T=u(`trending-up`,[[`path`,{d:`M16 7h6v6`,key:`box55l`}],[`path`,{d:`m22 7-8.5 8.5-5-5L2 17`,key:`1t1m79`}]]),E=m(),D=b(y(),1),O=_();const k=()=>{let{heroList:u}=n(),[m,_]=(0,D.useState)([,,,,,].fill(null)),[y,b]=(0,D.useState)([,,,,,].fill(null)),[S,E]=(0,D.useState)(null),k=e=>{if(!S)return;let{team:t,index:n}=S,r=t===`my`?[...m]:[...y];if(r[n]===e)return;r[n]=e,t===`my`?_(r):b(r);let i=r.findIndex((e,t)=>t>n&&e===null);i!==-1&&E({team:t,index:i})},A=e=>{if(!S)return;let{team:t}=S,n=t===`my`?[...m]:[...y],r=n.indexOf(e);r!==-1&&(n[r]=null,t===`my`?_(n):b(n),E({team:t,index:r}))},j=()=>{_([,,,,,].fill(null)),b([,,,,,].fill(null))},M=(0,D.useMemo)(()=>{let e=m.filter(e=>e!==null).map(e=>u.find(t=>t.id===e)).filter(Boolean),t=y.filter(e=>e!==null).map(e=>u.find(t=>t.id===e)).filter(Boolean),n=[],r=[],a=[],o=e=>i.filter(t=>t.name===e||t.name.startsWith(`${e}(`));return e.forEach(t=>{t&&o(t.heroName).forEach(r=>{r.relationships?.最佳搭档&&r.relationships.最佳搭档.heroes.forEach((i,a)=>{e.some(e=>e?.heroName===i.cname||i.cname.startsWith(`${e?.heroName}(`))&&(n.some(e=>e.hero===t.heroName&&e.partner===i.cname||e.hero===i.cname&&e.partner===t.heroName)||n.push({hero:t.heroName,partner:i.cname,desc:r.relationships.最佳搭档.descriptions[a]}))})})}),e.forEach(e=>{e&&o(e.heroName).forEach(n=>{n.relationships?.压制英雄&&n.relationships.压制英雄.heroes.forEach((i,a)=>{t.some(e=>e?.heroName===i.cname||i.cname.startsWith(`${e?.heroName}(`))&&r.push({hero:e.heroName,enemy:i.cname,desc:n.relationships.压制英雄.descriptions[a]})})})}),e.forEach(e=>{e&&o(e.heroName).forEach(n=>{n.relationships?.被压制英雄&&n.relationships.被压制英雄.heroes.forEach((r,i)=>{t.some(e=>e?.heroName===r.cname||r.cname.startsWith(`${e?.heroName}(`))&&(a.some(t=>t.enemy===r.cname&&t.hero===e.heroName)||a.push({enemy:r.cname,hero:e.heroName,desc:n.relationships.被压制英雄.descriptions[i]}))})})}),t.forEach(t=>{t&&o(t.heroName).forEach(n=>{n.relationships?.压制英雄&&n.relationships.压制英雄.heroes.forEach((r,i)=>{e.some(e=>e?.heroName===r.cname||r.cname.startsWith(`${e?.heroName}(`))&&(a.some(e=>e.enemy===t.heroName&&e.hero===r.cname)||a.push({enemy:t.heroName,hero:r.cname,desc:n.relationships.压制英雄.descriptions[i]}))}),n.relationships?.被压制英雄&&n.relationships.被压制英雄.heroes.forEach((i,a)=>{e.some(e=>e?.heroName===i.cname||i.cname.startsWith(`${e?.heroName}(`))&&(r.some(e=>e.hero===i.cname&&e.enemy===t.heroName)||r.push({hero:i.cname,enemy:t.heroName,desc:n.relationships.被压制英雄.descriptions[a]}))})})}),{partnerships:n,mySuppression:r,enemySuppression:a}},[m,y]),N=c(),P=({team:e,index:t,id:n})=>{let r=n?u.find(e=>e.id===n):null,i=e===`enemy`?N.palette.error.main:N.palette.primary.main;return(0,O.jsxs)(f,{onClick:()=>E({team:e,index:t}),sx:{position:`relative`,width:`100%`,aspectRatio:`1/1`,borderRadius:4,border:`2px solid`,bgcolor:l(i,.05),transition:`all 0.3s cubic-bezier(0.4, 0, 0.2, 1)`,cursor:`pointer`,overflow:`hidden`,display:`flex`,alignItems:`center`,justifyContent:`center`,...S?.team===e&&S?.index===t?{borderColor:i,boxShadow:`0 0 15px ${l(i,.3)}`,transform:`scale(1.05)`,zIndex:1}:{"&:hover":{borderColor:l(i,.5),transform:`translateY(-2px)`}}},children:[r?(0,O.jsx)(f,{component:`img`,src:r.heroSrc,alt:r.heroName,sx:{width:`100%`,height:`100%`,objectFit:`cover`,animation:`fadeIn 0.3s ease-out`}}):(0,O.jsx)(T,{size:24,style:{color:l(i,.3)}}),(0,O.jsx)(f,{className:`hover-overlay`,sx:{position:`absolute`,inset:0,bgcolor:l(N.palette.common.black,.2),opacity:0,transition:`opacity 0.2s`,display:`flex`,alignItems:`center`,justifyContent:`center`,"&:hover":{opacity:1}},children:(0,O.jsx)(x,{size:16,color:`white`})}),r&&(0,O.jsx)(f,{sx:{position:`absolute`,bottom:0,left:0,right:0,bgcolor:l(N.palette.common.black,.6),backdropFilter:`blur(4px)`,py:.5,px:1,textAlign:`center`},children:(0,O.jsx)(h,{variant:`caption`,sx:{color:`common.white`,fontWeight:900,fontSize:`10px`,display:`block`,whiteSpace:`nowrap`,overflow:`hidden`,textOverflow:`ellipsis`},children:r.heroName})})]})};return(0,O.jsxs)(C,{elevation:0,sx:{p:{xs:3,md:4},borderRadius:10,border:`1px solid`,borderColor:l(N.palette.divider,.1),bgcolor:l(N.palette.background.paper,.6),backdropFilter:`blur(20px)`,height:`100%`,display:`flex`,flexDirection:`column`,gap:3,position:`relative`,overflow:`hidden`,"&:hover .decorative-circle":{transform:`scale(1.1)`,opacity:.1}},children:[(0,O.jsxs)(v,{direction:`row`,alignItems:`center`,justifyContent:`space-between`,sx:{position:`relative`,zIndex:1},children:[(0,O.jsxs)(v,{direction:`row`,alignItems:`center`,spacing:1.5,children:[(0,O.jsx)(f,{sx:{width:40,height:40,borderRadius:3,bgcolor:l(N.palette.primary.main,.1),display:`flex`,alignItems:`center`,justifyContent:`center`,color:`primary.main`},children:(0,O.jsx)(s,{size:20})}),(0,O.jsxs)(f,{children:[(0,O.jsx)(h,{variant:`h6`,sx:{fontWeight:900,color:`text.primary`,tracking:`-0.02em`},children:`阵容克制关系分析`}),(0,O.jsx)(h,{variant:`caption`,sx:{color:`text.secondary`,fontWeight:500},children:`基于大数据分析英雄间的羁绊与克制`})]})]}),(0,O.jsx)(d,{variant:`outlined`,size:`small`,startIcon:(0,O.jsx)(o,{size:14}),onClick:j,sx:{borderRadius:3,borderColor:l(N.palette.divider,.2),color:`text.secondary`,fontWeight:800,px:2,"&:hover":{borderColor:`error.main`,color:`error.main`,bgcolor:l(N.palette.error.main,.05)}},children:`重置阵容`})]}),(0,O.jsxs)(e,{container:!0,spacing:4,sx:{position:`relative`,zIndex:1},children:[(0,O.jsx)(e,{size:{xs:6},children:(0,O.jsxs)(v,{spacing:2,children:[(0,O.jsxs)(v,{direction:`row`,alignItems:`center`,spacing:1,sx:{px:1},children:[(0,O.jsx)(g,{size:16,color:N.palette.primary.main}),(0,O.jsx)(h,{variant:`overline`,sx:{fontWeight:900,color:`primary.main`,letterSpacing:`0.1em`},children:`己方阵容`})]}),(0,O.jsx)(e,{container:!0,spacing:1.5,children:m.map((t,n)=>(0,O.jsx)(e,{size:{xs:2.4},children:(0,O.jsx)(P,{team:`my`,index:n,id:t})},`my-${n}`))})]})}),(0,O.jsx)(e,{size:{xs:6},children:(0,O.jsxs)(v,{spacing:2,children:[(0,O.jsxs)(v,{direction:`row`,alignItems:`center`,spacing:1,sx:{px:1,justifyContent:`flex-end`},children:[(0,O.jsx)(h,{variant:`overline`,sx:{fontWeight:900,color:`error.main`,letterSpacing:`0.1em`},children:`敌方阵容`}),(0,O.jsx)(x,{size:16,color:N.palette.error.main})]}),(0,O.jsx)(e,{container:!0,spacing:1.5,children:y.map((t,n)=>(0,O.jsx)(e,{size:{xs:2.4},children:(0,O.jsx)(P,{team:`enemy`,index:n,id:t})},`enemy-${n}`))})]})})]}),S&&(0,O.jsxs)(f,{sx:{position:`absolute`,inset:0,zIndex:50,bgcolor:l(N.palette.background.paper,.9),backdropFilter:`blur(20px)`,p:4,display:`flex`,flexDirection:`column`,animation:`fadeIn 0.3s ease-out`},children:[(0,O.jsxs)(v,{direction:`row`,alignItems:`center`,justifyContent:`space-between`,sx:{mb:4},children:[(0,O.jsxs)(v,{direction:`row`,alignItems:`center`,spacing:2,children:[(0,O.jsx)(f,{sx:{width:6,height:24,borderRadius:1,bgcolor:S.team===`my`?`primary.main`:`error.main`}}),(0,O.jsxs)(h,{variant:`h6`,sx:{fontWeight:900},children:[`选择`,S.team===`my`?`己方`:`敌方`,`第 `,S.index+1,` 位英雄`]})]}),(0,O.jsx)(p,{onClick:()=>E(null),sx:{bgcolor:l(N.palette.action.hover,.05),"&:hover":{bgcolor:l(N.palette.primary.main,.1),color:`primary.main`}},children:(0,O.jsx)(t,{size:20})})]}),(0,O.jsx)(f,{sx:{flex:1,overflow:`hidden`},children:(0,O.jsx)(r,{value:S.team===`my`?m[S.index]||0:y[S.index]||0,onChange:k,isStatic:!0,selectedIds:S.team===`my`?m.filter(e=>e!==null):y.filter(e=>e!==null),onRemove:A,maxSelect:5})}),(0,O.jsx)(h,{variant:`caption`,sx:{mt:2,textAlign:`center`,color:`text.secondary`,fontStyle:`italic`,fontWeight:500},children:`提示：在上方搜索框输入英雄名或直接从列表中选择英雄`})]}),(0,O.jsx)(f,{sx:{flex:1,overflowY:`auto`,pr:1,mt:1,position:`relative`,zIndex:1,minHeight:300,"&::-webkit-scrollbar":{width:`6px`},"&::-webkit-scrollbar-thumb":{bgcolor:l(N.palette.divider,.1),borderRadius:`10px`},"&::-webkit-scrollbar-thumb:hover":{bgcolor:l(N.palette.primary.main,.2)}},children:M.partnerships.length===0&&M.mySuppression.length===0&&M.enemySuppression.length===0?(0,O.jsxs)(v,{alignItems:`center`,justifyContent:`center`,sx:{height:`100%`,py:8,color:`text.secondary`,opacity:.5},children:[(0,O.jsx)(a,{size:48}),(0,O.jsx)(h,{variant:`body2`,sx:{mt:2,fontWeight:800},children:`选择英雄开始分析克制关系`})]}):(0,O.jsxs)(v,{spacing:3,children:[M.partnerships.length>0&&(0,O.jsxs)(v,{spacing:1.5,children:[(0,O.jsxs)(v,{direction:`row`,alignItems:`center`,spacing:1,sx:{px:1},children:[(0,O.jsx)(T,{size:14,color:N.palette.success.main}),(0,O.jsx)(h,{variant:`overline`,sx:{fontWeight:900,color:`success.main`,letterSpacing:`0.2em`},children:`最佳搭档`})]}),M.partnerships.map((e,t)=>(0,O.jsxs)(C,{elevation:0,sx:{p:2,borderRadius:4,bgcolor:l(N.palette.success.main,.05),border:`1px solid`,borderColor:l(N.palette.success.main,.1),animation:`fadeInUp 0.3s ease-out`},children:[(0,O.jsxs)(h,{variant:`subtitle2`,sx:{fontWeight:900,color:`success.main`,mb:.5},children:[e.hero,` & `,e.partner]}),(0,O.jsx)(h,{variant:`body2`,sx:{color:`text.secondary`,lineHeight:1.6,fontWeight:500},children:e.desc})]},t))]}),M.mySuppression.length>0&&(0,O.jsxs)(v,{spacing:1.5,children:[(0,O.jsxs)(v,{direction:`row`,alignItems:`center`,spacing:1,sx:{px:1},children:[(0,O.jsx)(x,{size:14,color:N.palette.primary.main}),(0,O.jsx)(h,{variant:`overline`,sx:{fontWeight:900,color:`primary.main`,letterSpacing:`0.2em`},children:`我方压制`})]}),M.mySuppression.map((e,t)=>(0,O.jsxs)(C,{elevation:0,sx:{p:2,borderRadius:4,bgcolor:l(N.palette.primary.main,.05),border:`1px solid`,borderColor:l(N.palette.primary.main,.1),animation:`fadeInUp 0.3s ease-out`},children:[(0,O.jsxs)(h,{variant:`subtitle2`,sx:{fontWeight:900,color:`primary.main`,mb:.5},children:[e.hero,` `,(0,O.jsx)(f,{component:`span`,sx:{mx:1,color:`text.secondary`,fontWeight:500},children:`压制`}),` `,e.enemy]}),(0,O.jsx)(h,{variant:`body2`,sx:{color:`text.secondary`,lineHeight:1.6,fontWeight:500},children:e.desc})]},t))]}),M.enemySuppression.length>0&&(0,O.jsxs)(v,{spacing:1.5,children:[(0,O.jsxs)(v,{direction:`row`,alignItems:`center`,spacing:1,sx:{px:1},children:[(0,O.jsx)(w,{size:14,color:N.palette.error.main}),(0,O.jsx)(h,{variant:`overline`,sx:{fontWeight:900,color:`error.main`,letterSpacing:`0.2em`},children:`敌方压制`})]}),M.enemySuppression.map((e,t)=>(0,O.jsxs)(C,{elevation:0,sx:{p:2,borderRadius:4,bgcolor:l(N.palette.error.main,.05),border:`1px solid`,borderColor:l(N.palette.error.main,.1),animation:`fadeInUp 0.3s ease-out`},children:[(0,O.jsxs)(h,{variant:`subtitle2`,sx:{fontWeight:900,color:`error.main`,mb:.5},children:[e.enemy,` `,(0,O.jsx)(f,{component:`span`,sx:{mx:1,color:`text.secondary`,fontWeight:500},children:`压制`}),` `,e.hero]}),(0,O.jsx)(h,{variant:`body2`,sx:{color:`text.secondary`,lineHeight:1.6,fontWeight:500},children:e.desc})]},t))]})]})}),(0,O.jsx)(f,{className:`decorative-circle`,sx:{position:`absolute`,bottom:-48,right:-48,width:192,height:192,bgcolor:l(N.palette.primary.main,.05),borderRadius:`50%`,filter:`blur(40px)`,transition:`all 0.5s ease-out`,pointerEvents:`none`}})]})};function A(){let e=(0,E.c)(3),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t={height:`100%`,overflowY:`hidden`,display:`flex`,flexDirection:`column`},e[0]=t):t=e[0];let n;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n={flex:1,overflowY:`auto`,py:{md:4,sm:2},zIndex:10},e[1]=n):n=e[1];let r;return e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,O.jsx)(f,{sx:t,children:(0,O.jsx)(S,{maxWidth:`lg`,sx:n,children:(0,O.jsx)(f,{children:(0,O.jsx)(k,{})})})}),e[2]=r):r=e[2],r}export{A as default};